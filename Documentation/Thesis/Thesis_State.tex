\chapter{State-of-the-art}
\label{chapter:stateofart}

\section{Overview}
\label{section:overview}
A detailed description is provided in this section concerning the state of the art technologies existing nowadays in the
market. Current Integration technologies available today are based on the SOA and REST architectural styles, with Web Services
and REST on HTTP as the most used implementations. This section also gives information about tools that we will use in our
solution.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Web Services}
\label{section:webservices}

Web services allow you to use two different machines or two different pieces of code that talk each other. Two different
applications can talk to each other over the network. They can call methods of each other over the network by using web
service technology. The other advantage of using web services is actually it is a standard technology because it is not
really specific to java or any other language. You can write web services all other technologies. For example you can write
web service with Java, .Net, Python, C++ or others. The best part of web service standard what is called as Interoperability
that  is a property of a product or system, whose interfaces are completely understood, to work with other products or
systems, present or future, without any restricted access or implementation\citep{interoperability:2016:Online}.\\

\begin{figure}[!htb]
  \centering
  \includegraphics[width=0.5\textwidth]{Figures/web-service-message-formats-1.png}
  \caption[Simple Web Service Architecture.]{Simple Web Service Architecture.}
  \label{fig:webservice}
\end{figure}

For example let’s say you have written web service in Java, let’s say you have another web service that written in .Net so what
the web service technology allows you to do is Java can call .Net web service and .Net web service can also call Java web
service and it just doesn’t have to be web service let’s say you have another application written in C++, so you can actually
have C++ app that call java web service or .Net web service. You can actually have different applications written in different
technologies that communicate with each other during execution time and they can call each other. This actually let us do is
you can actually pick and choose technologies that you want to use let’s say you have set of business web services that are
implemented in .Net and your java application can use them.\\

Web Services are exposed to the Internet for programmatic access. They are online APIs that you can call from your code.
When you want to call any API that written by someone else to your java code, you basically add jar or classes to your class
path and executions are done inside of machine or single environment. In the case of web services however you have different
pieces of code deployed over different machines and they call methods of each other over the network. For example, you must
have seen that different apps or games, which can post to your Facebook wall even these games, not designed by Facebook.
So you ask that how they can do that or how they can post to a wall of completely different system or application. Basically
they do this by calling online APIs. Companies like Facebook or Twitter publish web services that let other developers call
them from their code, so other application developers can actually write code to consume these services and they can post
things on Facebook or Twitter. They can read or access data from Facebook or Twitter using the APIs of the web services that
Facebook or Twitter has provided.\\

Web services are similar to web pages. For example Twitter has web side URL as “www.twitter.com“ when you access this URL on
your browser you get an HTML response that let you read and write tweets. They have HTML elements for data and also CSS files
for styling, this is because web pages that you see are made human conception. They know that there is actually human is behind
of browser on a laptop or devices who was reading these tweets, so they want to make sure about its format properly, so it is easy to access and read.
Twitter has also other URL as “api.twitter.com“ that does a lot of same things as “www.twitter.com“ does, but it behaves a bit
differently for instance this API gives you response which doesn’t have HTML or CSS code. It contains data but it is xml or json format and there are specific URLs for different operations this is what the developers can use from their code to read or write to twitter, so this data is actually very easy for parsing and converting then using in their objects and their code for developers. In this case there is no need HTML and CSS files.\\
There are primarily two different types of web services. One of these types called as  Simple Object Access Protocol (SOAP) web
service and another type called as REpresentational State Transfer(REST) web service. SOAP is older of these two and REST is newer entry to web services world, but both of them are used popular.
Next chapter will be focusing on SOAP and REST web services.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{SOAP Web Services}
\label{section:soa}

Simple Object Access Protocol, or SOAP as it was the first attempt to standardize a web service interface. It is based on
sending an XML message to a service, in a specific format, and receiving an XML response in another specific format.
The message can be sent across different transports, including HTTP, FTP, SMTP, and more. The specification does not
dictate the transport over which the message should be sent, but most implementations send the XML message over HTTP.\\

I will try to explain shortly SOAP web service by an example. Let’s start an example with java application. Let’s say we have
implementation class and I want to share this implementation class with other developer projects. How I would share this with a
consumer class. The best way to share this implementation class would be to contract it with an interface and other consumers
would consume this class through this interface. They would call implementation through interface so they get contract and they
get the methods, arguments, written types through interface. They actually call the methods of implementation class, so how this
works in case of web service, let’s say I have web service implementation and I want to share details of this web service to
consumers. Is it works with an interface? Probably it will not work because as we discussed before you don’t know what technology
is consuming it. It might be .Net application or C++ application, so if you have a java web service you might want to give some
kind of information that its consumer respects to that technology and that can actually consume. Let’s say consumer is .Net and if I give this .Net
application a java interface then most probably it will not work because they are different technologies, so the technology
that we are going to share with web service consumer has to be technology independent. It should be something that any
application or any technology can understand so creators of SOAP web service talked about that problem and what to give format
understandable by all technology with all consumers and decided with XML. So what we do is in case of web service, we
actually share that contract as an XML document. This XML document is actually called as WSDL.\\

WSDL document contains the contract to web service and so that’s are the things you have to do when you create the web
service and you share WSDL document of that web service to the consumers, so this is not something you would have to do
it manually. You would do it manually but there are tools which generate WSDL for the web service but it is something that
you need to share this WSDL to consumers and it is a XML document, so it respective whatever application because applications
such as .Net, C++ or Java can all parse this XML and get to know about service information and typically the content of
this WSDL is kind of similar to an interface content. It has operations, arguments and types  to return that consumer
applications will have idea what to call and how to call.\\

\begin{figure}[!htb]
  \centering
  \includegraphics[width=0.5\textwidth]{Figures/WSDL.png}
  \caption[WSDL file.]{WSDL file.}
  \label{fig:wsdl}
\end{figure}

The new question is that how this exchange happens, how you actually send this information, let’s say you have a method in
your java application and input argument is a string so you have a java string with you and you need to send to web service
and let’s say output return type is a list, so how you get this information because that could be .Net application and string
in java obviously different from string in .Net. How do you exchange this between client app and web service?  When you exchange
information input argument or return type you need to exchange it in the format that all different technologies can understand
what you are passing and it should be able to send return type back in language that all these technologies can understand.
Again this format is XML. When you are sending any information across the network from a client to the web services and
return type back to the client, the data has to be in XML format. You are not really sending java string or a list. So it
has to be language natural format which is XML. There is specification about how you need to send all these different input
type and output argument basically any type needs to be send specific XML format.\\

It is a protocol that is a way in which both sender and receiver and this XML is called SOAP.
It is a way in which these different technologies can access objects can access data it supposedly simple so that a part
of the name is called simple object access protocol. So with this protocol all different technologies written in different
languages can kind of understand what they all taking about.\\

\begin{figure}[!htb]
  \centering
  \includegraphics[width=0.8\textwidth]{Figures/soap.png}
  \caption[SOAP.]{SOAP.}
  \label{fig:wsdl}
\end{figure}

Now we know what is the mechanism we know what need to be send and we know how to send which is using SOAP protocol
but who does conversion? So for example you have your string object or complex object, so how do you convert it from java
object to a soap message? The conversion is actually done with intermedia class so this class takes care of converting all
your objects into a SOAP message. The whole method calls itself is actually done by SEI(Service Endpoint Interface). The SEI access interface to your
web service endpoint so you have an interface at your client app to the service endpoint which translate all web service
call to a SOAP message and then it makes sure that the other things is able to understand this message. So we don’t have to
write this class and all the conversion ourselves. We can have it automatically generated for us. When you are making a web
service call you don’t worry about where the web service is. When you need to call, all you need to do is have this endpoint
interface and good thing about this service endpoint that you can actually have an interface that specific to what you are
developing. When you have a java application you will have a specific SEI for java application and it knows to convert java
objects to SOAP message. Let’s say your .Net application calling the same web service so you will have SEI for .NET that know
to convert .Net objects to SOAP message.\\

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{REST Web Services}
\label{section:rest}
REST (Representational State Transfer) was created in 2000 by Roy Fielding\citep{rest:restinpractice}. Developed in an academic
environment, this protocol embraces the philosophy of the open Web. Instead of using XML to make a request, REST relies on a simple URL in many cases. In some situations you must provide
additional information in special ways, but most Web services using REST rely exclusively on obtaining the needed
information using the URL approach. REST can use four different HTTP 1.1 verbs (GET, POST, PUT, and DELETE) to
perform tasks.\\

Resources are the fundamental building blocks of web-based systems. A resource is anything we expose to the Web,
from a document or video clip to a business processor device. A URI uniquely identifies a web resource, and at the
same time makes it addressable, or capable of being manipulated using an application protocol such as HTTP. The
relationship between URIs and resources is many-to-one. A URI identifies only one resource, but a resource can
have more than one URI. That is, a resource can be identified in more than one way, much as humans can have multiple
email addresses or telephone numbers. This fits with our  need to identify real-world resources in more
than one way. Everything in REST web services has URl is unique and standard. for example Facebook, when you open an
account on Facebook, you will get a profile page that obivously dynamically generated pages, so whenever there is a
new profile, it basically the same page which does same processing but render different content depending on profile
that you are watching. In REST web services we need to think of resources and create unique urls for them. For example you are creating weathercast application and you want
to get weather for different cities of Portugal, so your URl needs to be unique for each city as examples below.\\

\begin{itemize}
  \item http://weatherapp.com/city/Lisbon (Unique URl for Lisbon city)
  \item http://weatherapp.com/city/Porto (Unique URl for Porto city)
  \item http://weatherapp.com/city/Algarve (Unique URl for Algarve city)
\end{itemize}

In REST web services, with same unique URl we can do different actions, for example if you are administrator of weathercast
application and you want to get data of Lisbon or if you want to update data of Lisbon or deleting data of Lisbon you can
use the same unique url for all these methods using HTTP methods. Only a single concrete URI, a single URI template,
and four HTTP verbs. In fact, it’s so compact that we can provide an overview in just a few lines, as shown in Table \ref{tab:aeroCoeff}.

\begin{table}[!htb]
  \renewcommand{\arraystretch}{1.2} % more space between rows
  \centering
  \begin{tabular}{lccc}
    \toprule
    Verb           & URI or template & Use  \\
    \midrule
    POST           & /city & Create a new city\\
    GET            & /city/{cityName} & Request the data of city specified by the URI.\\
    PUT            & /city/{cityName} & Update an city data at the given URI with new information.\\
    DELETE            & /city/{cityName} & Logically remove the city identified by the given URI.\\
    \bottomrule
  \end{tabular}
  \caption[HTTP Methods.]{HTTP Methods.}
  \label{tab:aeroCoeff}
\end{table}

\begin{figure}[!htb]
  \centering
  \includegraphics[width=0.8\textwidth]{Figures/rest.png}
  \caption[REST.]{REST.}
  \label{fig:rest}
\end{figure}

We've looked at requests so far, and understood what resource URIs and HTTP methods.
We make request to resource URIs with using HTTP methods. Let's switch to responses now.
After making request, RESTful web service will be responded. It is important format of response
because client needs to write code to handle that response. if that were a web application,
the response would be html page  with styling formatting. When it comes  RESTful Web service
you don't need all this styling because it can be basically  XML or Json.\\

Json is much more populer than XML because it is more compact especially you have large amount of data and also
when client is browser which is pice of javascript code running on browser
so sending respinse data in json


% ----------------------------------------------------------------------
\section{Web Sockets}
\label{section:websockets}

WebSockets\citep{Ontology:Matching} are a relatively new technology which promises to make websites more reactive by allowing lower latency
interaction between users and the server.\\

WebSocket is a protocol which allows for communication between the client and the server/endpoint using a single TCP
connection. it sounds a bit like http. The advantage WebSocket has over HTTP is that the protocol is full-duplex
(allows for simultaneous two-way communcation) and it’s header is much smaller than that of a HTTP header, allowing for
more efficient communcation even over small packets of data.\\

Web Sockets are also fundamental in the efficient support for binary data and increases performance.

Example of WebSocket life cycle:
1.Client sends the Server a handshake request in the form of a HTTP upgrade header with data about the WebSocket
it’s attempting to connect to.
2.The Server responds to the request with another HTTP header, this is the last time a HTTP header gets used in the
WebSocket connection. If the handshake was successful, they server sends a HTTP header telling the client it’s
switching to the WebSocket protocol.
3.When connection is opened and the client and server can send any number of messages to each other
until the connection is closed. These messages have very low bytes of overhead.
